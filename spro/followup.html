<?php
session_start();

if (!isset($_SESSION['usern'])){
    echo '<script type="text/javascript">'; 
echo 'window.location.href = "/Login_v2/index.php";';
echo '</script>';
}

?>
<!DOCTYPE html>
<html lang="en">
<head>
	<title>Patient Follow Up</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
<!--===============================================================================================-->
	<link rel="stylesheet" type="text/css" href="css/main.css">
	
	<link rel="stylesheet" type="text/css" href="css/util.css">
	
	<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">

<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

	<script type="text/javascript" src="https://formden.com/static/cdn/formden.js"></script>

<!-- Special version of Bootstrap that is isolated to content wrapped in .bootstrap-iso -->
<link rel="stylesheet" href="https://formden.com/static/cdn/bootstrap-iso.css" />

<!--Font Awesome (added because you use icons in your prepend/append)-->
<link rel="stylesheet" href="https://formden.com/static/cdn/font-awesome/4.4.0/css/font-awesome.min.css" />

	

<style>
#polo{
      background-color: #b19cd9;
 }
* {
  box-sizing: border-box;
}

.centerTable { 
margin: 0px auto; 
}
table {
  font-family: verdana, sans-serif;
  border-collapse: collapse;
  border-left-padding-left: 2px solid black;
  width: 25%;
  padding: 50px;
}

.poss{
padding-bottom: 25px;
}

hr{
  border: 1px solid ;
  padding: 0px 20px;
}

.thirdtab{
border-spacing: 15px;
}

td, th,tr {
  font-family: verdana, sans-serif;
  text-align: left;
  padding: 3px;
}

tr:nth-child(even) {
  
}
* {
  box-sizing: border-box;
}


/* Mark input boxes that gets an error on validation: */
input.invalid {
  background-color: #ffdddd;
}

/* Hide all steps by default: */
.tab {
  display: none;
}

button {
  background-color: #4CAF50;
  color: #ffffff;
  border: none;
  padding: 10px 20px;
  font-size: 17px;
  font-family: Raleway;
  cursor: pointer;
}

button:hover {
  opacity: 0.8;
}
.imgpos{
float:none;
padding-top:3px;
}

#prevBtn {
  background-color: #bbbbbb;
}

/* Make circles that indicate the steps of the form: */
.step {
  height: 15px;
  width: 15px;
  margin: 0 2px;
  background-color: #bbbbbb;
  border: none;  
  border-radius: 50%;
  display: inline-block;
  opacity: 0.5;
}

.step.active {
  opacity: 1;
}

/* Mark the steps that are finished and valid: */
.step.finish {
  background-color: #4CAF50;
}
@media only screen and (max-width:620px) {
  /* For mobile phones: */
  .menu, .main, .right {
    width:100%;
  }
  
  .foot{
  font-family:Times New Roman;
  }

</style>	



</head>


<body background="images/snow.jpg" onload="myData()">

	<div class="limiter" >
	
	<div class="row" id="polo">
    <div class="col-sm-3" >
    <!--<img src="D:/D.S/george/logo.jpg"/>-->
    </div>
    <div align="center" class="col-sm-6">
      <img src="images/df.png">
    </div>
	<div class="col-sm-3">
	</div>
   </div>
  <br/>


			
			<div class="row">
    <div class="col-sm-3"> 
  <p><a href="lpsd.php" class="btn btn-colour-1" style="border-radius:15px"><font color="white">Home<font></font></a></p><br/>
	<p><a href="hell.php" class="btn btn-colour-1" style="border-radius:15px"><font color="white">New Registration</font></a></p><br/>
	<p><a href="followup.php" class="btn btn-colour-1" style="border-radius:15px"><font color="white">Follow Up</font></a></p><br/>
	<p><a href="search.php" class="btn btn-colour-1" style="border-radius:15px"><font color="white">Search/Edit</font></font></a></p><br/>
	<p><a href="exportopt.php" class="btn btn-colour-1" style="border-radius:15px"><font color="white">Export to Excel</font></a></p><br/>
	<p><a href="#" class="btn btn-colour-1" style="border-radius:15px"><font color="white">Risk Factory Survey</font></a></p><br/>
	<p><a href="logout.php" class="btn btn-colour-1" style="border-radius:15px"><font color="white">Log Out</font></a></p><br/>
							<br/>
     </div>

    <div align="center" class="col-sm-6">
	<div class="container-login100" style="background: url(images/imgone.jpg);">
	<div align="left" class="wrap-login100">
      <span class="login100-form-title p-b-26">
					<b>Patient Follow Up</b>
					</span> 
				<form class="login100-form validate-form" action="patfollowup.php" method="post">

					
					<br/>
					<!--<span class="login100-form-title p-b-48">
						<i class="zmdi zmdi-font"></i>
					</span>-->

			
			<!--First Section-->
		<div class="tab">
				<!--<h3 class="title" align="center"><b><u>Patient's</u> <u>Basic</u> <u>Info</u> </b></u></h3>-->
				<b><u>Patient</u> <u>Personal</u> <u>Details</u> </b>
					<br/>
					<div align="right">	<a href=""  onclick="myDataClear()">Clear Data</a></div>
					<br/>
					
				
 <div class="wrap-input100 validate-input" >
					 Existing Patient Id Number<font color="red">*</font>
						<input class="input100" id="exipid" type="text" name="epid" onchange="eidStorage()" onKeyUp="book_suggestion()">
						<span class="focus-input100" ></span>
 </div>
 

<div id="txtHint" style="font-size:14px">Patient info will be listed here...</div>
        </div>

 
  <!-- Second table -->

 	<div  class="tab">	
  <!--h3 class="title" align="center"><b><u>Patient's</u> <u>Medical</u> <u>History</u> </b></u></h3>-->
  <b><u>Patient</u> <u>Investigation</u>  </b>
					<br/>
					<br/>
      		<div class="wrap-input100 validate-input" >
					   Date of Visit<font color="red">*</font>
						<input class="input100" type="date" id="doid" onchange="dovStorage()" name="dov">
						<span class="focus-input100" ></span>
	   </div> 			
      
	 <div class="invupdd">
				<div>Whether Undergone Any Dialysis?<font color="red">*</font></div>
				<br/>
    <label class="radio-inline">
      <input type="radio" onchange="adialyStorage()" id="adid" name="opprad" value="yes" > Yes
    </label>
	<br/>
    <label class="radio-inline">
      <input type="radio" onchange="adialyStorage()" id="adnnid" name="opprad" value="no"> No
    </label>
  
 </div>	 
 
	 <br/>
  
	   <div class="wrap-input100 validate-input" >
					   Serum Creatine<font color="red">*</font>
						<input class="input100" type="text" id="sid" onchange="scidValidate()" name="sc">
						<span class="focus-input100" ></span>
	   </div>
							
		<div class="wrap-input100 validate-input" >
					   eGFR<font color="red">*</font>
						<input class="input100" type="text" id="egfid" onchange="egfrStor()" name="egfr" readonly>
						<span class="focus-input100" ></span>
	    </div> 
	
		<div align="right"><button type="button"  onclick="egfrValidate()">Generate eGFR</button></div>
		<br/>
	    <div class="wrap-input100 validate-input" >
					   Systolic Blood Pressure<font color="red">*</font>
						<input class="input100" type="text" id="sbid" onchange="sbpidValidate()" name="sbp">
						<span class="focus-input100" ></span>
	    </div>
		
		<div class="wrap-input100 validate-input" >
					   Diastolic Blood Pressure<font color="red">*</font>
						<input class="input100" type="text" id="dbid" onchange="dbpidValidate()" name="dbp">
						<span class="focus-input100" ></span>
	    </div>
	  
	    <div class="wrap-input100 validate-input" >
					   Haemoglobin<font color="red">*</font>
						<input class="input100" type="text" id="hid" onchange="hgValidate()" name="hg">
						<span class="focus-input100" ></span>
	    </div>
	  
	    <div class="wrap-input100 validate-input" >
					   Urine Protein
						<input class="input100" id="uid" onchange="upStorage()" type="text" name="up">
						<span class="focus-input100" ></span>
	    </div>
				
		<div class="invd">
				<div>Have Undergone Any Other Tests ?<font color="red">*</font></div>
				<br/>
	 <label class="radio-inline">
      <input type="radio" onchange="huadialyStorage()" id="huadid" onclick="document.getElementById('demo').style.display='block'" name="oppad" value="yes" > Yes
    </label>
	<br/>
    <label class="radio-inline">
      <input type="radio" onchange="huadialyStorage()" id="huadnnid" onclick="document.getElementById('demo').style.display='none'" name="oppad" value="no"> No
    </label>
	<br/>
	<div id="demo" style="display:none">
				If yes, Please enter here
						<textarea class="form-control" rows="3" id="commen" onchange="commentStorage()" name="peh" ></textarea>
	 </div>
  
 </div>	
	 
	  
	 </div>
	  
	  <!-- Third Table-->
	  <div class="tab">
	  <!--<h3 class="title" align="center"><b><u>Patient's</u> <u>Prescriptions</u> </b></u></h3>-->
	  <b><u>Patient</u> <u>Medication</u> </b>
					<br/>
					<br/>
	    	<div class="wrap-input100 validate-input" >
					   Drug 1
						<input class="input100" id="donid" onchange="doneStorage()" type="text" name="drgone">
						<span class="focus-input100" ></span>
	   </div> 

	   <div class="wrap-input100 validate-input" >
					   Drug 2
						<input class="input100" id="dtwid" onchange="dtwoStorage()" type="text" name="drgtwo">
						<span class="focus-input100" ></span>
	   </div> 
	  <div class="wrap-input100 validate-input" >
					   Drug 3
						<input class="input100" id="dthreid" onchange="dthreeStorage()" type="text" name="drgthree">
						<span class="focus-input100" ></span>
	   </div> 
	   <div class="wrap-input100 validate-input" >
					   Drug 4
						<input class="input100" id="dfouid" onchange="dfourStorage()" type="text" name="drgfour">
						<span class="focus-input100" ></span>
	   </div> 
	   <div class="wrap-input100 validate-input" >
					   Drug 5
						<input class="input100" id="dfivid" onchange="dfiveStorage()" type="text" name="drgfive">
						<span class="focus-input100" ></span>
	   </div> 
      <div class="wrap-input100 validate-input" >
					   Drug 6
						<input class="input100" id="dsiid" onchange="dsixStorage()" type="text" name="drgsix">
						<span class="focus-input100" ></span>
	   </div> 
	    
				<br/>
	     <div class="invu">
				<div>Does the patient require to visit again?<font color="red">*</font></div>
				<br/>
    <label class="radio-inline">
      <input type="radio" id="dtid" onchange="vaoneStorage()" onclick="document.getElementById('idnvo').style.display='block'" name="opptra" value="yes" > Yes
    </label>
	<br/>
    <label class="radio-inline">
      <input type="radio" id="dtprvid" onchange="vaoneStorage()" onclick="document.getElementById('idnvo').style.display='none'"  name="opptra" value="no"> No
    </label>
  
 </div>
 <br/>

			 <div id="idnvo" class="wrap-input100 validate-input" style="display:none" >
			
				If yes, Next Visit On 
						<input class="input100" id="nvid" onchange="nvoStorage()" type="date" name="nextvis">
						<span class="focus-input100" ></span>
	         </div>
		                
						
						
	</div>
   					
				
				
  <div class="pos" align="right">
	<br/>
      <button type="button" id="prevBtn" onclick="nextPrev(-1)">Previous</button>
      <button type="button" id="nextBtn" onclick="nextPrev(1)">Next</button>
	  <button type="submit" id="subBtn" >Submit</button>
    </div>
  
  <br/>
  <br/>
						<!-- Circles which indicates the steps of the form: -->
  <div class="poss" align="center">
    <span class="step"></span>
    <span class="step"></span>
    <span class="step"></span>
  </div>
  </form>
			</div>
		</div>
    </div>
    
	<div class="col-sm-3">
 	
 
      <div class="foot" align ="center" style="font-family="verdana";">
	  
      <h4><b>The George Institute for Global Health</b></h4><br/>
        
           <b>311-312, Third Floor, Elegance Tower,<br/> 
		      Plot No. 8, Jasola District Centre,<br>
              New Delhi, 110025, India.<br>
              Tel: <a class="tel" href="tel:+911141588091">+91 11 415 880 91-93 </a><br>
              Fax: +91 11 415 880 90<br></b>
	  </div>	
        <br/>
		<br/>
    <div class="foot" align ="center" >
              <h4><b>Social Links India</b></h4><br/>
  
               <a href="https://www.facebook.com/GeorgeInstIN" class="nav-link"><b>Facebook  </b><i class="fa fa-facebook-official" style="font-size:24px;color:blue"></i></a><br/>
              <br/>
               
                <a href="https://twitter.com/GeorgeInstIN" class="nav-link"><b>Twitter   </b><i class="fa fa-twitter" style="font-size:24px;color:#00bfff"></i></a><br/>
             <br/>
                
                <a href="https://www.youtube.com/channel/UCjDJs_p9UIpomIcbqZuCZhw" class="nav-link"><span><b>YouTube  </b> <i class="fa fa-youtube"style="font-size:24px;color:red"></i></span></a>
              
		</div>


	
	</div>
	</div>
   </div>
			
			
		
			
	

	<div id="dropDownSelect1"></div>

<script>
var currentTab = 0; // Current tab is set to be the first tab (0)
showTab(currentTab); // Display the current tab


function showTab(n) {
  // This function will display the specified tab of the form...
  var x = document.getElementsByClassName("tab");
  x[n].style.display = "block";
  //... and fix the Previous/Next buttons:  
  if (n == 0) {
    document.getElementById("prevBtn").style.display = "none";
	document.getElementById("subBtn").style.display = "none";
  } else {
    document.getElementById("prevBtn").style.display = "inline";
	document.getElementById("nextBtn").style.display = "inline";
	document.getElementById("subBtn").style.display = "none";
  }
  if (n == (x.length - 1)) {
    document.getElementById("nextBtn").style.display = "none";
	document.getElementById("subBtn").style.display = "inline";
  } else {
    document.getElementById("nextBtn").innerHTML = "Next";
  }
  //... and run a function that will display the correct step indicator:
  fixStepIndicator(n)
}

function nextPrev(n) {
  // This function will figure out which tab to display
  var x = document.getElementsByClassName("tab");
  // Exit the function if any field in the current tab is invalid:
 // if (n == 1 && !validateForm()) return false;
  // Hide the current tab:
  x[currentTab].style.display = "none";
  // Increase or decrease the current tab by 1:
  currentTab = currentTab + n;
  // if you have reached the end of the form...
  if (currentTab >= x.length) {
    // ... the form gets submitted:
    document.getElementById("regForm").submit();
    return false;
  }
  // Otherwise, display the correct tab:
  showTab(currentTab);
}

/*function validateForm() {
  // This function deals with validation of the form fields
  var x, y, i, valid = true;
  x = document.getElementsByClassName("tab");
  y = x[currentTab].getElementsByTagName("input");
  // A loop that checks every input field in the current tab:
  for (i = 0; i < y.length; i++) {
    // If a field is empty...
    if (y[i].value == "") {
      // add an "invalid" class to the field:
      y[i].className += " invalid";
      // and set the current valid status to false
      valid = false;
    }
  }
  // If the valid status is true, mark the step as finished and valid:
  if (valid) {
    document.getElementsByClassName("step")[currentTab].className += " finish";
  }
  return valid; // return the valid status
}*/

function fixStepIndicator(n) {
  // This function removes the "active" class of all steps...
  var i, x = document.getElementsByClassName("step");
  for (i = 0; i < x.length; i++) {
    x[i].className = x[i].className.replace(" active", "");
  }
  //... and adds the "active" class on the current step:
  x[n].className += " active";
}


function eidStorage(){
 var eval = document.getElementById("exipid").value;
 localStorage.setItem("exipval",eval);
}

function book_suggestion()
{
var book = document.getElementById("exipid").value;

 var xhttp;  
  if (book == "") {
    document.getElementById("txtHint").innerHTML = "";
    return;
  }
xhttp = new XMLHttpRequest();
  xhttp.onreadystatechange = function() {
    if (this.readyState == 4 && this.status == 200) {
      document.getElementById("txtHint").innerHTML = this.responseText;
    }
  };
  xhttp.open("GET", "getdetails.php?q="+book, true);
  xhttp.send();
}

 function dovStorage(){
var dovval=document.getElementById("doid").value;
localStorage.setItem("dovw",dovval);
}		
function adialyStorage(){
var radios = document.getElementsByName("opprad"); // list of radio buttons

for(var i=0;i<radios.length;i++){
  if(radios[i].checked == true){
    localStorage.setItem("adialva",radios[i].value);     
	 //radios[i].checked = true; // marking the required radio as checked
  }
}
}

function scidValidate(){
	var scidval=document.getElementById("sid").value;
	localStorage.setItem("scidw",scidval);
	if(scidval=="" || isNaN(scidval) || scidval<0.01 ||scidval>20){
	    alert("Serum Creatine is Mandatory. It should contain only Numbers, values between 0.01 to 20 ");
	}
	}	
	
	
function sbpidValidate(){
	var sbpidval=document.getElementById("sbid").value;
	localStorage.setItem("sbpidw",sbpidval);
	if(sbpidval=="" || isNaN(sbpidval) || sbpidval<50 ||sbpidval>300){
	    alert("Systolic Blood Pressure is Mandatory. It should contain only Numbers, values between 50 to 300 ");
	}
	}	
function dbpidValidate(){
	var dbpidval=document.getElementById("dbid").value;
	localStorage.setItem("dbpidw",dbpidval);
	if(dbpidval=="" || isNaN(dbpidval) || dbpidval<30 ||dbpidval>200){
	    alert("Diastolic Blood Pressure is Mandatory. It should contain only Numbers, values between 30 to 200 ");
	}
	}
	
	function hgValidate(){
	var hgidval=document.getElementById("hid").value;
	localStorage.setItem("hgidw",hgidval);
	if(hgidval=="" || isNaN(hgidval) || hgidval<1 ||hgidval>20){
	    alert("Haemoglobin should contain only Numbers, values between 1 to 20 ");
	}
	}
		function upStorage(){
var upval=document.getElementById("uid").value;
localStorage.setItem("upw",upval);
}	
	
	
function huadialyStorage(){
var radios = document.getElementsByName("oppad"); // list of radio buttons

for(var i=0;i<radios.length;i++){
  if(radios[i].checked == true){
    localStorage.setItem("huadyva",radios[i].value);     
	 //radios[i].checked = true; // marking the required radio as checked
  }
}
}

function commentStorage(){
var comval=document.getElementById("commen").value;
localStorage.setItem("comvalw",comval);

}

	   function doneStorage(){
var doneval=document.getElementById("donid").value;
localStorage.setItem("donew",doneval);
}		
 function dtwoStorage(){
var dtwoval=document.getElementById("dtwid").value;
localStorage.setItem("dtwow",dtwoval);
}	
 function dthreeStorage(){
var dthreeval=document.getElementById("dthreid").value;
localStorage.setItem("dthreew",dthreeval);
}	
function dfourStorage(){
var dfourval=document.getElementById("dfouid").value;
localStorage.setItem("dfourw",dfourval);
}	
function dfiveStorage(){
var dfiveval=document.getElementById("dfivid").value;
localStorage.setItem("dfivew",dfiveval);
}
function dsixStorage(){
var dsixval=document.getElementById("dsiid").value;
localStorage.setItem("dsixw",dsixval);
}
 	   
function vaoneStorage(){
var radios = document.getElementsByName("opptra"); // list of radio buttons

for(var i=0;i<radios.length;i++){
  if(radios[i].checked == true){
    localStorage.setItem("nvow",radios[i].value);     
	 //radios[i].checked = true; // marking the required radio as checked
  }
}
}

function egfrValidate(){
var str= document.getElementById("exipid").value;
var scidvl= document.getElementById("sid").value;
        var xmlhttp = new XMLHttpRequest();
        xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("egfid").value = this.responseText;
				localStorage.setItem("egfval",document.getElementById("egfid").value);
            }
        };
        xmlhttp.open("GET", "getdet.php?q=" + str +"&p="+ scidvl, true);
        xmlhttp.send();
    
 }
 
 
 
function nvoStorage(){
var nvoval=document.getElementById("nvid").value;
localStorage.setItem("nvovalw",nvoval);
}


		function myData(){
		
  document.getElementById("exipid").value = localStorage.getItem("exipval");
  document.getElementById("doid").value = localStorage.getItem("dovw");
		
      if(localStorage.getItem("adialva")=="yes"){
	  document.getElementById("adid").checked=true;
	 }
	 if(localStorage.getItem("adialva")=="no"){
	  document.getElementById("adnnid").checked=true;
	 }
	  
	   document.getElementById("sid").value = localStorage.getItem("scidw");
	   document.getElementById("egfid").value = localStorage.getItem("egfval");
	    document.getElementById("sbid").value = localStorage.getItem("sbpidw");
		 document.getElementById("dbid").value = localStorage.getItem("dbpidw");
		 document.getElementById("hid").value = localStorage.getItem("hgidw");
		 
		   document.getElementById("uid").value = localStorage.getItem("upw");
		   
		if(localStorage.getItem("huadyva")=="yes"){
	  document.getElementById("huadid").checked=true;
	  document.getElementById("demo").style.display = "block";
	 }
	 if(localStorage.getItem("huadyva")=="no"){
	  document.getElementById("huadnnid").checked=true;
	 }
     	document.getElementById("commen").value = localStorage.getItem("comvalw");
	 document.getElementById("donid").value = localStorage.getItem("donew");
	  document.getElementById("dtwid").value = localStorage.getItem("dtwow");
	   document.getElementById("dthreid").value = localStorage.getItem("dthreew");
	    document.getElementById("dfouid").value = localStorage.getItem("dfourw");
     document.getElementById("dfivid").value = localStorage.getItem("dfivew");
    document.getElementById("dsiid").value = localStorage.getItem("dsixw");
	 
	  if(localStorage.getItem("nvow")=="yes"){
	  document.getElementById("dtid").checked=true;
	  document.getElementById("idnvo").style.display = "block";
	 }
	 if(localStorage.getItem("nvow")=="no"){
	  document.getElementById("dtprvid").checked=true;
	 }
	  document.getElementById("nvid").value = localStorage.getItem("nvovalw");
	 

}
	

 function myDataClear(){
 var retVal = confirm("Are You Sure to Continue ?");
               if( retVal == true ) {
                   localStorage.clear();
                  return true;
               } else {

                  return false;
               }

 }
 
</script>


 


<!-- Extra JavaScript/CSS added manually in "Settings" tab -->
<!-- Include jQuery -->
<script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

<!-- Include Date Range Picker -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/js/bootstrap-datepicker.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.4.1/css/bootstrap-datepicker3.css"/>




    <!-- Jquery JS-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <!-- Vendor JS-->
    <script src="vendor/select2/select2.min.js"></script>
    <script src="vendor/datepicker/moment.min.js"></script>
    <script src="vendor/datepicker/daterangepicker.js"></script>

    <!-- Main JS-->
    <script src="js/global.js"></script>

</body>
</html>